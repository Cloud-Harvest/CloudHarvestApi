# template configuration for the backend cache server
.cache: &cache_server
  host: localhost
  port: 27017
  username:     # intentionally null
  password:     # intentionally null

cache:
  hosts:
    # read-only configuration
    reader:
      <<: *cache_server

    # read/write configuration
    writer:
      <<: *cache_server

  # base backend database indexes
  indexes:
    harvest:  &harvest_indexes
      pstar:
        - Platform
        - Service
        - Type
        - Account
        - Region
        - Records
        - Errors
        - keys:
            - field: Platform
            - field: Service
            - field: Type
            - field: Account
            - field: Region
          options:
            name: unique_pstar_idx
            comment: unique identifier for pstar records
            unique: true
      meta:
        - [Collection, CollectionId]
        - keys:
            - field: Harvest.Module.UniqueFilter
          options:
            unique: true
    test:
      <<: *harvest_indexes

logging:
  level: debug
  location: /var/log/harvest-api.log

modules:
  - https://github.com/Cloud-Harvest/module-aws.git
